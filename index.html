<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan With Pixie Dust - Magical Travel Planning & Tours</title>
    <!-- SEO Keywords -->
    <meta name="description" content="Plan With Pixie Dust offers unique travel tours, insider tips, and hacks inspired by a former Disney Cruise Line crew member. Discover budget-friendly, authentic adventures for millennial women.">
    <meta name="keywords" content="Disney cruise tips, plan with pixie dust, travel tours, travel hacks, millennial travel, authentic travel, sustainable travel, Paris tours, Amsterdam travel, travel planning">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a1078a571f.js" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: 'Playfair Display', serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
        }
        /* Custom Colors */
        .text-navy { color: #1C2526; }
        .text-gold { color: #D4A017; }
        .bg-navy { background-color: #1C2526; }
        .bg-red { background-color: #C8102E; }
        .bg-soft-blue-gradient { background-image: linear-gradient(to bottom, #A3BFFA, #FFFFFF); }

        /* General Styling */
        .cta-button { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .cta-button:hover { transform: scale(1.03); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }

        /* Loading Spinner */
        .loading-animation {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #D4A017;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Pixie Dust Animation */
        .pixie-dust-effect {
            position: absolute;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
        }
        .pixie-dust-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 300%; 
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10"><circle cx="5" cy="5" r="2" fill="%23D4A017" /></svg>'), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><circle cx="4" cy="4" r="1.5" fill="%23A3BFFA" /></svg>');
            background-repeat: repeat-x;
            background-size: 10px 10px, 8px 8px;
            background-position: 0% 50%, 50% 100%;
            animation: pixie-dust 30s infinite linear;
            opacity: 0.8;
        }

        @keyframes pixie-dust {
            0% { background-position: 0% 50%, 50% 100%; }
            100% { background-position: -100% 50%, 50% 100%; }
        }
    </style>
</head>
<body class="text-navy antialiased">

    <!-- Hero Section -->
    <header class="relative w-full h-screen flex items-center justify-center text-center overflow-hidden">
        <!-- Background image and effect -->
        <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1543349688-690226c6d0d2?q=80&w=2670&auto=format&fit=crop');"></div>
        <div class="absolute inset-0 bg-black opacity-40"></div>
        <div class="pixie-dust-effect"></div>

        <!-- Hero Content -->
        <div class="relative z-10 p-6 md:p-12 max-w-4xl rounded-2xl bg-white bg-opacity-10 backdrop-blur-sm shadow-2xl">
            <h1 class="text-3xl md:text-5xl lg:text-6xl font-extrabold text-gold leading-tight tracking-tight drop-shadow-lg">Sprinkle Pixie Dust on Your Next Adventure with Insider Travel Tips!</h1>
            <p class="mt-4 md:mt-6 text-xl md:text-2xl font-normal text-white drop-shadow-md">Plan unforgettable trips with curated tours and hacks from a former Disney Cruise Line crew member.</p>
            <a href="https://trip.tpo.mx/RpBFeUPs" class="cta-button mt-8 md:mt-10 inline-flex items-center space-x-2 bg-red text-white font-bold py-4 px-8 rounded-full shadow-lg hover:shadow-xl">
                <i class="fas fa-star text-gold animate-pulse"></i>
                <span>Find Your Perfect Tour Now!</span>
            </a>
            <p class="mt-2 text-xs text-white opacity-80">This page contains affiliate links. I may earn a commission if you book through them, at no extra cost to you.</p>
        </div>
    </header>

    <!-- Benefits Section -->
    <section class="bg-soft-blue-gradient py-16 px-4 md:py-24">
        <div class="container mx-auto max-w-4xl text-center">
             <h2 class="text-4xl md:text-5xl font-bold text-navy mb-12">Why Choose Pixie Dust?</h2>
            <ul class="space-y-6 md:space-y-8">
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-star text-gold mt-1 text-2xl flex-shrink-0"></i>
                    <p class="text-lg md:text-xl text-navy">
                        Curated tours inspired by my Disney Cruise Line days—authentic and hassle-free.
                    </p>
                </li>
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-star text-gold mt-1 text-2xl flex-shrink-0"></i>
                    <p class="text-lg md:text-xl text-navy">
                        Save time with insider hacks for unforgettable travel.
                    </p>
                </li>
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-star text-gold mt-1 text-2xl flex-shrink-0"></i>
                    <p class="text-lg md:text-xl text-navy">
                        Book budget-friendly adventures via trusted partners.
                    </p>
                </li>
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-star text-gold mt-1 text-2xl flex-shrink-0"></i>
                    <p class="text-lg md:text-xl text-navy">
                        Share envy-worthy moments with tips for Instagram-worthy photos.
                    </p>
                </li>
            </ul>
        </div>
    </section>

    <!-- Magical Itinerary Builder (Gemini API) -->
    <section class="bg-gray-100 py-16 px-4 md:py-24">
        <div class="container mx-auto max-w-4xl text-center">
            <h2 class="text-4xl md:text-5xl font-bold text-gold mb-8">Magical Itinerary Builder ✨</h2>
            <p class="text-lg md:text-xl text-navy mb-8">Tell us about your dream trip, and we'll conjure a personalized itinerary just for you.</p>
            <div class="max-w-2xl mx-auto space-y-4">
                <input type="text" id="destination" placeholder="Destination (e.g., Paris)" class="w-full p-4 rounded-xl border border-gray-300 text-navy focus:ring-2 focus:ring-gold focus:outline-none placeholder-gray-500">
                <input type="text" id="interests" placeholder="Interests (e.g., food, art, adventure)" class="w-full p-4 rounded-xl border border-gray-300 text-navy focus:ring-2 focus:ring-gold focus:outline-none placeholder-gray-500">
                <input type="text" id="duration" placeholder="Duration (e.g., 3 days, 1 week)" class="w-full p-4 rounded-xl border border-gray-300 text-navy focus:ring-2 focus:ring-gold focus:outline-none placeholder-gray-500">
                <button onclick="generateItinerary()" class="cta-button bg-gold text-navy font-bold py-3 px-8 rounded-full transition-colors duration-300 w-full flex items-center justify-center space-x-3">
                    <span id="itinerary-button-text">Craft My Magical Itinerary! ✨</span>
                    <div id="itinerary-loading" class="hidden loading-animation"></div>
                </button>
            </div>
            <div id="itinerary-output" class="mt-8 text-left p-6 bg-white rounded-xl shadow-lg border border-gray-200 min-h-32 text-gray-700" style="white-space: pre-wrap;">
                Your dream itinerary will appear here after a little sprinkle of pixie dust!
            </div>
        </div>
    </section>

    <!-- Sparkle Caption Generator (Gemini API) -->
    <section class="py-16 px-4 md:py-24">
        <div class="container mx-auto max-w-4xl text-center">
            <h2 class="text-4xl md:text-5xl font-bold text-gold mb-8">Sparkle Caption Generator ✨</h2>
            <p class="text-lg md:text-xl text-navy mb-8">Describe your photo, and we'll create a perfectly magical caption for your next post.</p>
            <div class="max-w-2xl mx-auto space-y-4">
                <textarea id="caption-description" rows="4" placeholder="Describe your photo here (e.g., 'Drinking coffee in a Parisian cafe, sunny day with the Eiffel Tower in the background')." class="w-full p-4 rounded-xl border border-gray-300 text-navy focus:ring-2 focus:ring-gold focus:outline-none placeholder-gray-500"></textarea>
                <button onclick="generateCaption()" class="cta-button bg-gold text-navy font-bold py-3 px-8 rounded-full transition-colors duration-300 w-full flex items-center justify-center space-x-3">
                    <span id="caption-button-text">Generate My Caption! ✨</span>
                    <div id="caption-loading" class="hidden loading-animation"></div>
                </button>
            </div>
            <div id="caption-output" class="mt-8 text-left p-6 bg-white rounded-xl shadow-lg border border-gray-200 min-h-32 text-gray-700" style="white-space: pre-wrap;">
                Your perfect Instagram caption will shine here!
            </div>
            <button id="copy-caption-button" class="hidden mt-4 bg-navy text-white font-bold py-2 px-6 rounded-full text-sm hover:bg-gray-800 transition-colors duration-300">Copy to Clipboard</button>
        </div>
    </section>

    <!-- Pixie Dust Tips Section -->
    <section class="relative py-16 px-4 md:py-24 overflow-hidden text-navy" style="background-image: url('https://images.unsplash.com/photo-1549414271-e970b58e7235?q=80&w=2670&auto=format&fit=crop'); background-size: cover; background-position: center;">
        <div class="absolute inset-0 bg-white opacity-80"></div>
        <div class="pixie-dust-effect absolute inset-0 opacity-20"></div>
        <div class="container mx-auto max-w-4xl text-center relative z-10">
            <h2 class="text-4xl md:text-5xl font-bold text-gold mb-8 md:mb-12">Pixie Dust Tips</h2>
            <ul class="space-y-6 md:space-y-8 text-navy">
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-magic text-gold text-2xl mt-1"></i>
                    <p class="text-lg md:text-xl">
                        Book early for the best tour deals, just like securing a Disney cruise cabin.
                    </p>
                </li>
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-map-marked-alt text-gold text-2xl mt-1"></i>
                    <p class="text-lg md:text-xl">
                        Use my Navigator app tips for stress-free travel planning.
                    </p>
                </li>
                <li class="flex items-start text-left space-x-4">
                    <i class="fas fa-suitcase-rolling text-gold text-2xl mt-1"></i>
                    <p class="text-lg md:text-xl">
                        Pack light for tours with my Disney-inspired packing hacks.
                    </p>
                </li>
            </ul>
        </div>
    </section>

    <!-- Social Proof Section (Rest of the HTML is truncated for brevity but included in the final file) -->
    <section class="bg-gray-100 py-16 px-4 md:py-24">
        <div class="container mx-auto max-w-xl text-center">
            <blockquote class="italic text-xl md:text-2xl text-navy mb-4">
                “Plan With Pixie Dust made my Paris tour magical!”
            </blockquote>
            <p class="font-bold text-lg text-navy">
                — Sarah M.
            </p>
            <div class="mt-8">
                <div class="flex items-center justify-center space-x-2">
                    <svg class="w-10 h-10 text-gold" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15.5V10h-2V8h4v9.5h-2zM13 14h-2v2h2v-2z"/>
                    </svg>
                    <p class="text-sm font-semibold text-navy">Crafted by a former Disney Cruise Line crew member.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16 px-4 md:py-24 text-center">
        <div class="container mx-auto max-w-4xl">
            <p class="text-2xl md:text-3xl text-red font-bold mb-4">Limited-Time Offer!</p>
            <div class="relative inline-block mb-8">
                <img src="https://placehold.co/400x150/C8102E/FFFFFF?text=3%20Days%20Left!" alt="Countdown graphic" class="rounded-xl shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/400x150/C8102E/FFFFFF?text=Offer%20Ends%20Soon!%20';">
            </div>
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-4">
                <a href="#" class="cta-button bg-red text-white font-bold py-4 px-8 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                    Get Your Free Magical Travel Planner Now!
                </a>
                <a href="https://trip.tpo.mx/RpBFeUPs" class="cta-button bg-gold text-navy font-bold py-4 px-8 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                    Book Your Dream Tour Today!
                </a>
            </div>
            <p class="mt-4 text-xs text-navy opacity-80">This page contains affiliate links. I may earn a commission if you book through them, at no extra cost to you.</p>
        </div>
    </section>

    <!-- Medium Article Integration Section -->
    <section class="bg-gray-200 py-16 px-4 md:py-24 text-center">
        <div class="container mx-auto max-w-4xl">
            <p class="text-lg md:text-xl text-navy">
                Explore More Magical Destinations: Inspired by my Disney days, explore Paris at night or Amsterdam’s canals with my curated guides!
            </p>
            <a href="https://medium.com/@turoka15/discover-5-magical-paris-night-experiences-c5f403bc0560" target="_blank" class="mt-4 inline-block text-gold font-bold hover:underline transition-colors duration-200">
                Read the Paris Guide <i class="fas fa-long-arrow-alt-right ml-1"></i>
            </a>
        </div>
    </section>

    <!-- Dynamic Banner Section -->
    <section class="py-16 px-4 md:py-24 text-center">
        <div class="container mx-auto">
            <h2 class="text-2xl md:text-3xl font-bold text-gold mb-6">Explore Exclusive Travel Deals!</h2>
            <div class="flex justify-center">
                <iframe border="0" src="https://www.trip.com/partners/ad/DB4900975?Allianceid=6939913&SID=249890257&trip_sub1=" style="width:300px;height:250px;border:none;" frameborder="0" scrolling="no" id="DB4900975"></iframe>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-navy text-white py-16 px-4">
        <div class="container mx-auto text-center">
            <h2 class="text-3xl font-bold mb-4">Join the Community!</h2>
            <p class="text-lg mb-8">
                Get insider hacks and exclusive travel tips delivered right to your inbox.
            </p>

            <!-- Newsletter Form Placeholder -->
            <form action="#" method="POST" class="max-w-xl mx-auto mb-8 space-y-4">
                <input type="email" placeholder="Enter your email address" class="w-full p-3 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gold text-navy" required>
                <div class="flex justify-center items-center">
                    <a href="#" class="cta-button bg-gold text-navy font-bold py-3 px-8 rounded-full transition-colors duration-300">
                        Join the Community for Exclusive Hacks!
                    </a>
                </div>
            </form>

            <div class="border-t border-gray-700 pt-8 mt-8">
                <!-- Social Links -->
                <div class="flex justify-center space-x-6 mb-6">
                    <a href="https://www.pinterest.com/" target="_blank" class="text-white hover:text-gold transition-colors duration-200 text-3xl" aria-label="Pinterest">
                        <i class="fab fa-pinterest"></i>
                    </a>
                    <a href="https://www.tiktok.com/" target="_blank" class="text-white hover:text-gold transition-colors duration-200 text-3xl" aria-label="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="https://www.facebook.com/" target="_blank" class="text-white hover:text-gold transition-colors duration-200 text-3xl" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                </div>
                <p class="text-sm">© 2025 Plan With Pixie Dust</p>
                <a href="mailto:contact@planwithpixiedust.com" class="text-sm text-white hover:underline transition-colors duration-200">contact@planwithpixiedust.com</a>
            </div>
        </div>
    </footer>
    
    <script>
        // Netlify Functions endpoints
        const ITINERARY_ENDPOINT = '/.netlify/functions/itinerary-proxy';
        const CAPTION_ENDPOINT = '/.netlify/functions/caption-proxy';
        const MAX_RETRIES = 3;

        /**
         * Generic fetch wrapper with exponential backoff for API calls.
         */
        async function fetchWithRetry(endpoint, payload) {
            for (let i = 0; i < MAX_RETRIES; i++) {
                try {
                    const response = await fetch(endpoint, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (response.ok) {
                        return result;
                    } else if (response.status === 429 && i < MAX_RETRIES - 1) {
                        // Rate limit error (429) - wait and retry
                        const delay = Math.pow(2, i) * 1000; // 1s, 2s, 4s
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue; // Go to next retry attempt
                    } else {
                        // Other non-retryable errors
                        throw new Error(`Proxy call failed with status: ${response.status}. Error: ${result.error || 'Unknown'}`);
                    }
                } catch (error) {
                    if (i === MAX_RETRIES - 1) {
                        throw error;
                    }
                    // Connection errors are also retried
                    const delay = Math.pow(2, i) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }


        async function generateItinerary() {
            const destination = document.getElementById('destination').value;
            const interests = document.getElementById('interests').value;
            const duration = document.getElementById('duration').value;
            const outputDiv = document.getElementById('itinerary-output');
            const buttonText = document.getElementById('itinerary-button-text');
            const loadingIndicator = document.getElementById('itinerary-loading');

            if (!destination || !interests || !duration) {
                outputDiv.innerText = 'Please fill out all fields (Destination, Interests, Duration) to craft your magical itinerary.';
                return;
            }

            // Show loading state
            buttonText.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            outputDiv.innerText = 'Sprinkling pixie dust... crafting your itinerary now!';

            const systemPrompt = `You are a magical travel planner and former Disney Cruise Line crew member. Create a unique, day-by-day travel itinerary. Use an engaging, encouraging, and magical tone. The itinerary should be fun, adventurous, and authentic, perfect for a millennial woman. Format the output with clear bolded headings for each day.`;
            
            const userPrompt = `Create an itinerary for:
Destination: ${destination}
Interests: ${interests}
Duration: ${duration}`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                // Call the secure Netlify Function for itineraries
                const result = await fetchWithRetry(ITINERARY_ENDPOINT, payload); 
                const itineraryText = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (itineraryText) {
                    outputDiv.innerHTML = formatMarkdown(itineraryText); 
                } else {
                    outputDiv.innerText = 'Sorry, the pixie dust is running low! Please refine your request and try again.';
                }
            } catch (error) {
                console.error('Itinerary Generation Error:', error);
                outputDiv.innerText = 'An error occurred while crafting your itinerary. Please ensure your Netlify Functions are deployed and environment variables are set.';
            } finally {
                // Hide loading state
                buttonText.classList.remove('hidden');
                loadingIndicator.classList.add('hidden');
            }
        }

        async function generateCaption() {
            const description = document.getElementById('caption-description').value;
            const outputDiv = document.getElementById('caption-output');
            const buttonText = document.getElementById('caption-button-text');
            const loadingIndicator = document.getElementById('caption-loading');
            const copyButton = document.getElementById('copy-caption-button');

            if (!description) {
                outputDiv.innerText = 'Please describe your photo to generate a caption.';
                copyButton.classList.add('hidden');
                return;
            }

            // Show loading state
            buttonText.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            copyButton.classList.add('hidden');
            outputDiv.innerText = 'Adding sparkle... generating your perfect caption!';

            const systemPrompt = `You are a social media expert creating a fun, magical, and enchanting Instagram caption for a millennial woman. The caption should be charming and inspiring, as if written by a former Disney crew member. The caption MUST be short (max 3 sentences), creative, and include relevant emojis and 3-5 relevant hashtags.`;

            const userPrompt = `Create a captivating Instagram caption for this photo: ${description}`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                // Call the secure Netlify Function for captions
                const result = await fetchWithRetry(CAPTION_ENDPOINT, payload);
                const captionText = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (captionText) {
                    outputDiv.innerText = captionText;
                    copyButton.classList.remove('hidden');
                } else {
                    outputDiv.innerText = 'Oops! The magic wand ran out of batteries. Please try generating the caption again.';
                }
            } catch (error) {
                console.error('Caption Generation Error:', error);
                outputDiv.innerText = 'An error occurred while generating your caption. Please ensure your Netlify Functions are deployed and environment variables are set.';
            } finally {
                // Hide loading state
                buttonText.classList.remove('hidden');
                loadingIndicator.classList.add('hidden');
            }
        }
        
        // Simple function to convert basic markdown (like **bold**) to HTML
        function formatMarkdown(text) {
            let html = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/\n/g, '<br>');
            return html;
        }

        // Copy to clipboard functionality using execCommand (iframe compatible)
        document.getElementById('copy-caption-button').addEventListener('click', () => {
            const outputText = document.getElementById('caption-output').innerText;
            const tempInput = document.createElement('textarea');
            tempInput.value = outputText;
            document.body.appendChild(tempInput);
            tempInput.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    document.getElementById('copy-caption-button').innerText = 'Copied!';
                } else {
                    document.getElementById('copy-caption-button').innerText = 'Copy Failed!';
                }
            } catch (err) {
                console.error('Copy failed:', err);
                document.getElementById('copy-caption-button').innerText = 'Copy Failed!';
            }

            document.body.removeChild(tempInput);
            
            setTimeout(() => {
                document.getElementById('copy-caption-button').innerText = 'Copy to Clipboard';
            }, 2000);
        });
    </script>

</body>
</html>
